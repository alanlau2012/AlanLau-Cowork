---
name: ç³»ç»Ÿè®¾ç½®æ¨¡å—
overview: ä¸ºåº”ç”¨æ·»åŠ ç³»ç»Ÿè®¾ç½®æ¨¡å—ï¼Œæ”¯æŒé…ç½®ä¼ä¸šå†…éƒ¨çš„ Claude Code + Minimax 2.1 API æœåŠ¡ç«¯ç‚¹ã€API å¯†é’¥å’Œæ¨¡å‹åˆ—è¡¨ï¼Œä½¿ç”¨ Electron Store æŒä¹…åŒ–å­˜å‚¨ã€‚
todos:
  - id: deps-install
    content: å®‰è£… electron-store ä¾èµ–å¹¶é…ç½®ä¸»è¿›ç¨‹
    status: pending
  - id: preload-api
    content: åœ¨ preload.js ä¸­æš´éœ²è®¾ç½®ç›¸å…³ API
    status: pending
  - id: backend-config
    content: ä¿®æ”¹ server.js æ”¯æŒåŠ¨æ€é…ç½®è¯»å–
    status: pending
  - id: settings-ui
    content: å®ç°è®¾ç½®å¼¹çª— UIï¼ˆHTML + CSS + JSï¼‰
    status: pending
  - id: integration
    content: é›†æˆæµ‹è¯•å’ŒéªŒè¯
    status: pending
---

# ç³»ç»Ÿè®¾ç½®æ¨¡å—å®æ–½è®¡åˆ’

## èƒŒæ™¯

å½“å‰åº”ç”¨ä½¿ç”¨ Claude Agent SDK ç›´è¿ Anthropic APIï¼Œç¡¬ç¼–ç åœ¨ `server/server.js` ä¸­ã€‚ä¼ä¸šéƒ¨ç½²éœ€è¦æ”¯æŒé…ç½®å†…éƒ¨ API ç«¯ç‚¹ã€‚

## æ¶æ„è®¾è®¡

```mermaid
flowchart LR
    subgraph Renderer[æ¸²æŸ“è¿›ç¨‹]
        SettingsUI[è®¾ç½®å¼¹çª— UI]
        SettingsState[è®¾ç½®çŠ¶æ€ç®¡ç†]
    end

    subgraph Main[ä¸»è¿›ç¨‹]
        ElectronStore[electron-store]
        IPC[IPC é€šé“]
    end

    subgraph Backend[åç«¯æœåŠ¡]
        ServerConfig[åŠ¨æ€é…ç½®åŠ è½½]
        ClaudeSDK[Claude Agent SDK]
    end

    SettingsUI --> SettingsState
    SettingsState --> IPC
    IPC --> ElectronStore
    ElectronStore --> ServerConfig
    ServerConfig --> ClaudeSDK
```

## æ ¸å¿ƒæ”¹åŠ¨æ–‡ä»¶

| æ–‡ä»¶ | æ”¹åŠ¨å†…å®¹ |

|------|----------|

| [package.json](package.json) | æ·»åŠ  `electron-store` ä¾èµ– |

| [main.js](main.js) | é›†æˆ electron-storeï¼Œæš´éœ² IPC é€šé“ |

| [preload.js](preload.js) | æš´éœ² `getSettings`/`saveSettings` API |

| [server/server.js](server/server.js) | æ”¯æŒä»é…ç½®è¯»å– API ç«¯ç‚¹/å¯†é’¥ |

| [renderer/index.html](renderer/index.html) | æ·»åŠ è®¾ç½®æŒ‰é’®å…¥å£ + è®¾ç½®å¼¹çª— |

| [renderer/renderer.js](renderer/renderer.js) | æ·»åŠ è®¾ç½®æ¨¡å—é€»è¾‘ |

| [renderer/style.css](renderer/style.css) | è®¾ç½®å¼¹çª—æ ·å¼ |

## é…ç½®é¡¹æ•°æ®ç»“æ„

```javascript
{
  apiEndpoint: "https://internal-api.company.com",  // ä¼ä¸šå†…éƒ¨ API ç«¯ç‚¹
  apiKey: "sk-xxx",                                  // API å¯†é’¥
  models: [                                          // å¯ç”¨æ¨¡å‹åˆ—è¡¨
    { id: "minimax-2-1", name: "Minimax 2.1", default: true },
    { id: "glm-4-7", name: "GLM 4.7" }
  ]
}
```

## è®¾ç½® UI å…¥å£ä½ç½®

åœ¨å·¦ä¾§è¾¹æ åº•éƒ¨æ·»åŠ è®¾ç½®é½¿è½®å›¾æ ‡ï¼Œç‚¹å‡»å¼¹å‡ºè®¾ç½®å¼¹çª—ï¼ˆModalï¼‰ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [+] New Chat      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ æœç´¢èŠå¤©å†å²...     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ ä»Šå¤©              â”‚
â”‚  â€¢ Chat 1         â”‚
â”‚  â€¢ Chat 2         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ (åº•éƒ¨ç•™ç™½)         â”‚
â”‚ [âš™] Settings     â”‚  <-- æ–°å¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è®¾ç½®å¼¹çª— UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç³»ç»Ÿè®¾ç½®                    [X]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  API ç«¯ç‚¹                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ https://api.anthropic.com    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  API å¯†é’¥                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ sk-ant-xxx...      [ğŸ‘]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  å¯ç”¨æ¨¡å‹                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ + æ·»åŠ æ¨¡å‹                    â”‚   â”‚
â”‚  â”‚ â€¢ Minimax 2.1 [é»˜è®¤] [åˆ é™¤]   â”‚   â”‚
â”‚  â”‚ â€¢ GLM 4.7           [åˆ é™¤]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚       [å–æ¶ˆ]      [ä¿å­˜è®¾ç½®]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®æ–½æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ·»åŠ ä¾èµ–å’Œä¸»è¿›ç¨‹æ”¹é€ 

1. å®‰è£… `electron-store` ä¾èµ–
2. åœ¨ `main.js` ä¸­åˆå§‹åŒ– electron-store
3. æ·»åŠ  IPC é€šé“å¤„ç†è®¾ç½®çš„è¯»å–/ä¿å­˜

### ç¬¬äºŒæ­¥ï¼šPreload æ¡¥æ¥

1. åœ¨ `preload.js` ä¸­æš´éœ² `electronAPI.getSettings()` å’Œ `electronAPI.saveSettings()`
2. æ·»åŠ é…ç½®å˜æ›´é€šçŸ¥æœºåˆ¶

### ç¬¬ä¸‰æ­¥ï¼šåç«¯æœåŠ¡é…ç½®åŒ–

1. ä¿®æ”¹ `server/server.js`ï¼Œå¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶
2. æ”¯æŒåŠ¨æ€åˆ‡æ¢ API ç«¯ç‚¹ï¼ˆå¯é€‰ï¼šé€šè¿‡ç¯å¢ƒå˜é‡æˆ–é…ç½®æ¥å£ï¼‰
3. æ·»åŠ  `/api/config` ç«¯ç‚¹ä¾›å‰ç«¯è·å–/æ›´æ–°é…ç½®

### ç¬¬å››æ­¥ï¼šå‰ç«¯ UI å®ç°

1. åœ¨ `index.html` å·¦ä¾§è¾¹æ åº•éƒ¨æ·»åŠ è®¾ç½®æŒ‰é’®
2. æ·»åŠ è®¾ç½®å¼¹çª— Modal HTML ç»“æ„
3. åœ¨ `renderer.js` ä¸­å®ç°è®¾ç½®æ¨¡å—é€»è¾‘
4. æ·»åŠ å¼¹çª—æ ·å¼åˆ° `style.css`

### ç¬¬äº”æ­¥ï¼šé›†æˆæµ‹è¯•

1. éªŒè¯è®¾ç½®ä¿å­˜å’ŒåŠ è½½æ­£å¸¸
2. éªŒè¯åˆ‡æ¢ API ç«¯ç‚¹åè¯·æ±‚æ­£ç¡®å‘é€
3. éªŒè¯æ¨¡å‹åˆ—è¡¨åŠ¨æ€æ›´æ–°

## å®‰å…¨è€ƒè™‘

- API å¯†é’¥å­˜å‚¨åœ¨æœ¬åœ° electron-store ä¸­ï¼Œä¸ä¸Šä¼ æœåŠ¡å™¨
- è®¾ç½®å¼¹çª—ä¸­å¯†é’¥é»˜è®¤éšè—ï¼Œæä¾›æ˜¾ç¤º/éšè—åˆ‡æ¢
- é…ç½®æ–‡ä»¶ä½ç½®ï¼š`%APPDATA%/open-claude-cowork/config.json`ï¼ˆWindowsï¼‰
