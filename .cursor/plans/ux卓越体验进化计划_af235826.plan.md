---
name: UX卓越体验进化计划
overview: 通过引入重新生成机制、实时状态反馈和深色模式，全面提升应用的交互深度与视觉舒适度。
todos:
  - id: ux-regenerate-btn
    content: 实现“重新生成 (Regenerate)”按钮及逻辑
    status: completed
  - id: ux-status-feedback
    content: 在流式生成中添加实时的子状态反馈 (如：正在检索文件...)
    status: completed
  - id: ux-dark-mode
    content: 实现全局深色模式支持及主题切换开关
    status: completed
  - id: ux-unify-tabs
    content: 合并右侧面板的“执行过程”与“工具调用”为统一时间线视图
    status: completed
  - id: ux-resizable-panels
    content: 实现侧边栏宽度的鼠标拖拽调整功能
    status: completed
---

# UX 卓越体验进化计划

本计划聚焦于增强 AI 互动的确定性、提升视觉舒适度以及优化信息密度，旨在通过最小的改动获取最大的用户体验提升。

## 1. 核心交互增强 (P0)

### 1.1 重新生成 (Regenerate)

- **目标**: 允许用户对不满意的 AI 回答进行一键式重新生成。
- **文件**: `renderer/uiHelpers.js`, `renderer/renderer.js`
- **逻辑**:
- 在消息操作栏添加“重新生成”按钮。
- 点击后查找最后一条用户消息，删除其后的助手回复。
- 自动将用户消息填入输入框并触发发送流程。

### 1.2 实时状态反馈 (Status Bar)

- **目标**: 消除 AI 思考时的“黑盒”感。
- **文件**: `renderer/renderer.js`, `renderer/style.css`
- **逻辑**:
- 在正在生成的回复下方增加一个小巧的状态行。
- 根据 SSE 的 `tool_use` / `text` / `thinking` 事件更新状态文本。

## 2. 视觉体验飞跃 (P1)

### 2.1 深色模式 (Dark Mode)

- **目标**: 减轻用户长时间阅读的视觉压力。
- **文件**: `renderer/style.css`, `renderer/index.html`
- **逻辑**:
- 补充 `:root.dark` 变量定义。
- 在 UI 中增加显眼的切换开关，并在 `localStorage` 中持久化选择。

### 2.2 右面板 Tab 融合 (Unified Timeline)

- **目标**: 降低信息碎片化，提升阅读效率。
- **文件**: `renderer/index.html`, `renderer.js`
- **逻辑**:
- 将“执行过程”与“工具调用”合并为统一的 **Timeline (时间线)** 视图。
- 将工具调用过程作为时间线节点进行嵌套展示。

## 3. 专业操控优化 (P2)

### 3.1 可拖拽调整宽度 (Resizable Splitters)

- **目标**: 适应不同复杂度的代码阅读场景。
- **文件**: `renderer/renderer.js`, `renderer/style.css`
- **逻辑**:
- 在侧边栏边缘实现基于鼠标拖拽的宽度调整逻辑。
