<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 93d22c4f-228a-49e5-af1b-e2f31d1957cf (2026-01-18 16:01Z) -->

# 系统设置模块与内部模型API集成 (2026-01-18 16:01Z)

_**User**_

我要给当前项目增加一个系统设置的模块，未来把这个程序安装到我们公司内部的时候，可以对接到企业内部的ClaudeCode + 模型API服务（背后的模型也是Minimax 2.1）

---

_**Agent (model claude-4.5-opus-high-thinking, mode Plan)**_

<think><details><summary>Thought Process</summary>
用户想要添加一个系统设置模块，主要目的是让应用能够对接企业内部的 Claude Code + 模型 API 服务（底层是 Minimax 2.1 模型）。

在制定计划之前，我需要先了解当前项目的相关代码结构，特别是：

1. 当前的 API 配置方式（.env 文件中的配置）
2. 服务器端如何调用 Claude API
3. 前端渲染层的界面结构
4. 现有的配置管理机制

让我先读取一些关键文件来理解项目结构。</details></think>

---

我需要先了解当前项目的 API 配置和调用方式，以便制定合适的系统设置模块方案。

---

Path 'd:\AI项目\AlanLau-cowork\open-claude-cowork\.env.example' exists but is filtered out by globalignore

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\AI项目\AlanLau-cowork\open-claude-cowork\server\server.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\AI项目\AlanLau-cowork\open-claude-cowork\renderer\renderer.js</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\AI项目\AlanLau-cowork\open-claude-cowork\preload.js</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
现在我了解了项目的结构：

1. 当前使用 Claude Agent SDK (`@anthropic-ai/claude-agent-sdk`) 调用 API
2. 后端通过 `.env` 文件配置 API 密钥
3. preload.js 硬编码了 `SERVER_URL = 'http://localhost:3001'`

用户想要的是：

1. 添加一个系统设置模块
2. 可配置企业内部的 Claude Code + 模型 API 服务
3. 底层模型是 Minimax 2.1

在继续之前，我需要问几个关键问题来明确需求：

1. 企业内部 API 的格式是什么样的？是兼容 OpenAI 格式还是 Anthropic 格式？
2. 系统设置需要包含哪些配置项？（API 端点、API 密钥、模型名称等）
3. 设置存储方式：localStorage、配置文件，还是其他？

让我查看现有的界面结构，理解如何添加设置入口。</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file_v2">
<details><summary>Tool use: **read_file_v2** • Read file: d:\AI项目\AlanLau-cowork\open-claude-cowork\renderer\index.html</summary>

</details>
</tool-use>

---
